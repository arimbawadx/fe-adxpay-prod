"use strict";(self["webpackChunkadxpay"]=self["webpackChunkadxpay"]||[]).push([[38],{5038:function(a,e,s){s.r(e),s.d(e,{default:function(){return ga}});var t=s(3396),n=s(9242),i=s(7139);const o={class:"container content"},l=(0,t._)("div",{class:"row"},[(0,t._)("div",{class:"col-12"},[(0,t._)("h1",{class:"text-primary"},"Transaksi Tagihan Listrik")])],-1),r={class:"row mt-3"},c={class:"col-12 mt-2"},d=(0,t._)("div",{class:"alert alert-danger rounded-10",role:"alert"}," Masukkan no PLN yang valid! ",-1),h=[d],u={key:0,class:"col-12 mt-2"},p={class:"alert alert-primary rounded-10",role:"alert"},m={class:"col-12"},_={class:"card bg-putih shadow rounded-10"},k={class:"card-body"},g={class:"text-left"},v={class:"form-group"},b=(0,t._)("label",{for:"no_tujuan",class:"text-primary"},"ID PLN",-1),w={key:1,type:"button",class:"btn btn-lg btn-block btn-primary rounded-10",disabled:""},f=(0,t._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),y=(0,t.Uk)(" Loading... "),C=[f,y],D={key:0,class:"card rounded-10 mt-3"},T=(0,t._)("div",{class:"card-header text-center"},"Detail Tagihan",-1),P={class:"card-body"},N={class:"row"},x=(0,t._)("div",{class:"col-6"},"ID Reff",-1),B={class:"col-6"},j={class:"row"},z=(0,t._)("div",{class:"col-6"},"No Pelanggan",-1),S={class:"col-6"},q={class:"row"},V=(0,t._)("div",{class:"col-6"},"Nama Pelanggan",-1),L={class:"col-6"},R={class:"row"},A=(0,t._)("div",{class:"col-6"},"Periode",-1),F={class:"col-6"},M={class:"row"},I=(0,t._)("div",{class:"col-6"},"Tagihan",-1),U={class:"col-6"},Y={class:"row"},H=(0,t._)("div",{class:"col-6"},"Biaya Admin",-1),O={class:"col-6"},J={class:"row"},K=(0,t._)("div",{class:"col-6"},"Total Tagihan",-1),Z={class:"col-6"},E={class:"row"},G=(0,t._)("div",{class:"col-6"},"Fee",-1),Q={class:"col-6"},W={class:"row"},X=(0,t._)("div",{class:"col-6"},[(0,t._)("strong",null,"Total Bayar")],-1),$={class:"col-6"},aa=(0,t._)("div",{class:"row"},[(0,t._)("div",{class:"col-12"},[(0,t._)("hr")])],-1),ea={class:"row"},sa={class:"col-12"},ta={key:0,class:"form-group"},na=(0,t._)("label",{for:"metode_pembayaran"},"Metode Pembayaran",-1),ia=(0,t._)("option",{value:""},"Pilih",-1),oa=(0,t._)("option",{value:"Hutang"},"Bayar Nanti",-1),la={value:"Dompet"},ra={class:"col-12"};function ca(a,e,s,d,f,y){return(0,t.wg)(),(0,t.iD)("div",o,[l,(0,t._)("div",r,[(0,t.wy)((0,t._)("div",c,h,512),[[n.F8,!this.noPlNValid]]),this.hasilCheck?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[400==this.hasilCheck.responseCode?((0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("div",p,(0,i.zw)(this.hasilCheck.responseData.description),1)])):(0,t.kq)("",!0)],64)):(0,t.kq)("",!0),(0,t._)("div",m,[(0,t._)("div",_,[(0,t._)("div",k,[(0,t._)("form",g,[(0,t._)("div",v,[b,(0,t.wy)((0,t._)("input",{onInput:e[0]||(e[0]=(...a)=>y.checkDigit&&y.checkDigit(...a)),"onUpdate:modelValue":e[1]||(e[1]=a=>this.noTujuan=a),id:"no_tujuan",required:"",autocomplete:"off",type:"text",class:"form-control form-control-lg border border-primary rounded-10",name:"no_hp",placeholder:"Masukkan Nomor PLN.."},null,544),[[n.nr,this.noTujuan]])]),(0,t._)("div",null,[!this.loadCheckSpinner&&this.noPlNValid?((0,t.wg)(),(0,t.iD)("button",{key:0,onClick:e[2]||(e[2]=a=>y.checkTagihan()),type:"button",class:"btn btn-lg btn-block btn-primary rounded-10"}," Cek Tagihan ")):(0,t.kq)("",!0),this.loadCheckSpinner?((0,t.wg)(),(0,t.iD)("button",w,C)):(0,t.kq)("",!0)]),this.hasilCheck?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[200==this.hasilCheck.responseCode?((0,t.wg)(),(0,t.iD)("div",D,[T,(0,t._)("div",P,[(0,t._)("div",N,[x,(0,t._)("div",B,(0,i.zw)(this.hasilCheck.responseData.ref_id),1)]),(0,t._)("div",j,[z,(0,t._)("div",S,(0,i.zw)(this.hasilCheck.responseData.no_pelanggan),1)]),(0,t._)("div",q,[V,(0,t._)("div",L,(0,i.zw)(this.hasilCheck.responseData.nama_pelanggan),1)]),(0,t._)("div",R,[A,(0,t._)("div",F,(0,i.zw)(this.hasilCheck.responseData.periode),1)]),(0,t._)("div",M,[I,(0,t._)("div",U," Rp. "+(0,i.zw)(this.hasilCheck.responseData.jumlah_tagihan),1)]),(0,t._)("div",Y,[H,(0,t._)("div",O," Rp. "+(0,i.zw)(this.hasilCheck.responseData.biaya_admin),1)]),(0,t._)("div",J,[K,(0,t._)("div",Z," Rp. "+(0,i.zw)(this.hasilCheck.responseData.total_tagihan),1)]),(0,t._)("div",E,[G,(0,t._)("div",Q," Rp. "+(0,i.zw)(this.hasilCheck.responseData.fee),1)]),(0,t._)("div",W,[X,(0,t._)("div",$," Rp. "+(0,i.zw)(this.hasilCheck.responseData.total_bayar),1)]),aa,(0,t._)("div",ea,[(0,t._)("div",sa,["1"==this.user.verified?((0,t.wg)(),(0,t.iD)("div",ta,[na,(0,t.wy)((0,t._)("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>f.metodePembayaran=a),id:"metode_pembayaran",name:"metode_pembayaran",required:"",class:"form-control form-control-lg rounded-10"},[ia,oa,(0,t._)("option",la," Dompet | Saldo Anda: Rp. "+(0,i.zw)(y.numberFormat(this.user.saldo)),1)],512),[[n.bM,f.metodePembayaran]])])):(0,t.kq)("",!0)]),(0,t._)("div",ra,[(0,t._)("button",{type:"button",class:"btn btn-lg btn-block btn-primary rounded-10",onClick:e[4]||(e[4]=a=>y.kirim())}," Bayar ")])])])])):(0,t.kq)("",!0)],64)):(0,t.kq)("",!0)])])])])])])}s(2338);var da=s(2492),ha=s.n(da),ua=s(6265),pa=s.n(ua),ma={name:"CusTransaksiTLPascaView",props:["ipAdress"],data(){return{user:JSON.parse(localStorage.getItem("SessionUser")),noTujuan:null,noPlNValid:!1,loadCheckSpinner:!1,hasilCheck:null,dataCheckNoTujuan:{},idOperator:null,idProduct:null,metodePembayaran:null,dataLoadProduct:null}},methods:{kirim(){"0"==this.user.verified&&(this.metodePembayaran="Dompet"),this.metodePembayaran?ha().fire({title:"Yakin untuk mengirim?",text:"Pastikan data form sudah benar!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yakin"}).then((a=>{if(a.isConfirmed){const a=new FormData;a.append("metode_pembayaran",this.metodePembayaran),a.append("ref_id",this.hasilCheck.responseData.ref_id),a.append("no_pelanggan",this.hasilCheck.responseData.no_pelanggan),a.append("nama_pelanggan",this.hasilCheck.responseData.nama_pelanggan),a.append("total_tagihan",this.hasilCheck.responseData.total_tagihan),a.append("total_bayar",this.hasilCheck.responseData.total_bayar),a.append("cus_id",this.user.id),pa()({method:"post",url:this.ipAdress+"api/transaksi/tlpasca?username="+this.user.username,data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(a){"failed"==a.data.status?ha().fire({icon:"error",title:a.data.message,text:a.data.keterangan,showConfirmButton:!0,timer:1500}).then((function(){window.location="/customer/data-transaksi"})):""==a.data?ha().fire({icon:"success",title:"Diproses",text:"Transaksi Diproses",showConfirmButton:!0,timer:1500}).then((function(){window.location="/customer/data-transaksi"})):ha().fire({icon:"success",title:a.data.message,text:a.data.keterangan,showConfirmButton:!0,timer:1500}).then((function(){window.location="/customer/data-transaksi"}))})).catch((function(a){console.log(a)}))}})):ha().fire({icon:"error",title:"Metode Pembayaran Kosong",text:"silahkan pilih metode pembayaran!",showConfirmButton:!1,timer:1500})},numberFormat(a){return a?a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0"},checkDigit:function(){this.hasilCheck=null,11==this.noTujuan.replace(/[^0-9]/g,"").length||12==this.noTujuan.replace(/[^0-9]/g,"").length?this.noPlNValid=!0:this.noPlNValid=!1},checkTagihan(){this.noTujuan=this.noTujuan.replace(/[^0-9]/g,""),this.loadCheckSpinner=!0,pa()({method:"post",url:this.ipAdress+"api/check-tagihan-pln/"+this.noTujuan+"?username="+this.user.username,headers:{"Content-Type":"multipart/form-data"}}).then((a=>{console.log(a),this.hasilCheck=a.data,this.loadCheckSpinner=!1})).catch((function(a){console.log(a)}))}},mounted(){}},_a=s(89);const ka=(0,_a.Z)(ma,[["render",ca]]);var ga=ka}}]);
//# sourceMappingURL=38.c690b973.js.map